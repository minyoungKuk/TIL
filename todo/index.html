<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todo List</title>

    <link rel="stylesheet" href="../css/reset.css" />
    <link rel="stylesheet" href="../css/style.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="module">
      // Firebase SDK 라이브러리 가져오기
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
      import {
        collection,
        addDoc,
      } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
      import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

      // Firebase 구성 정보 설정
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyDIIxbpgYkbvH-EX-RDdrOX8rdziEBwSHA",
        authDomain: "sparta-ccbfe.firebaseapp.com",
        projectId: "sparta-ccbfe",
        storageBucket: "sparta-ccbfe.appspot.com",
        messagingSenderId: "137119719673",
        appId: "1:137119719673:web:4aa90eb4c5e3d5f4a18228",
        measurementId: "G-B8P5ZXYR0S",
      };

      // Firebase 인스턴스 초기화
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      $("#listAddBtn").click(async function () {
        let lists = $("#todolist").val();
        let listsDate = $("#todolistdate").val();

        let doc = {
          lists: lists,
          listsDate: listsDate,
        };

        if (lists === "") {
          alert("추가 할 일을 적어주세요 🥹");
        } else {
          await addDoc(collection(db, "todolist"), doc);
          alert("할 일을 성공적으로 추가하였습니다.");
          window.location.reload();
        }
      });
    </script>
  </head>
  <body>
    <div class="wrap">
      <div class="header">
        <a href="https://minyoungkuk.github.io/TIL/" class="home"
          >Minyoung's diary</a
        >
        <nav>
          <ul>
            <li><a href="../index.html">TIL</a></li>
            <li><a href="">기술일지</a></li>
            <li><a href="">참고자료</a></li>
            <li class="active"><a href="./index.html">Todo</a></li>
          </ul>
        </nav>
      </div>

      <div class="main">
        <h2>Todo List - <span>까먹지말고 해야 할 일 체크리스트 💌</span></h2>
        <div class="myListBox">
          <div>
            <input
              type="text"
              id="todolist"
              style="width: 500px"
              placeholder="해야할 일을 추가해 주세요."
            />
            <input type="date" id="todolistdate" />
          </div>

          <button id="listAddBtn">할일 추가</button>
        </div>

        <div class="myTodoList">
          <div class="lists">
            <div class="txt">Read an article <span>2021.01.02</span></div>
            <div class="chkbox">
              <div class="outer-circle">
                <div class="inner-circle"></div>
              </div>
            </div>
          </div>
          <div class="lists done">
            <div class="txt">
              Being QA for the project <span>2021.01.02</span>
            </div>
            <div class="chkbox">
              <div class="outer-circle">
                <div class="inner-circle"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <ul>
          <li>@내일배움캠프</li>
          <li>@React 5기 - 국민영</li>
        </ul>
      </div>
    </div>
  </body>
</html>
